<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>
	<script>
		function monitor(data){
			var loading = document.getElementById("image");
			if(data.status == "begin"){
				loading.style.display = "block";
			}
			else if(data.status == "success"){
				loading.style.display = "none";
			}
		}
	</script>
	<h:outputScript library="javax.faces" name="jsf.js" />
</h:head>
<h:body>
	<f:view>
		<ui:composition template="/WEB-INF/templates/basicTemplate.html">
			<ui:define name="content">
				<h1>JavaBeat JSF 2.2 Examples</h1>
				<h2>JSF2 Ajax Monitoring Example</h2>
				<h:form prependId="false">
					<p:inputText id="input" value="#{beanProgressLoading.message}" />
			#{' '}
			<h:commandButton value="Display Text"
						action="#{beanProgressLoading.action}"
						oncomplete="PF('dialogProgress').show()">
						<f:ajax execute="@this input" render="output" onevent="monitor"></f:ajax>
					</h:commandButton>
			#{' '}
			<p:outputLabel id="output" value="#{beanProgressLoading.message}"></p:outputLabel>
					<p:graphicImage id="image" value="/images/ajaxloader.gif"
						style="display:none;" width="150" height="100"></p:graphicImage>
				</h:form>
			</ui:define>
		</ui:composition>
	</f:view>


	<h:form id="formDialog">
		<p:dialog header="progress" widgetVar="dialogProgress" modal="true"
			showEffect="fade" hideEffect="explode" resizable="false"
			id="dlgDialogProgress">
			<p:graphicImage id="image" value="/images/ajaxloader.gif"
				style="display:none;" width="150" height="100"></p:graphicImage>
		</p:dialog>
	</h:form>
</h:body>
</html>