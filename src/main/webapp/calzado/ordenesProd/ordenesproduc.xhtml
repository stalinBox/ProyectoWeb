<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<h:head></h:head>
<body>
	<ui:composition template="/WEB-INF/templates/basicTemplate.html">
		<ui:define name="content">

			<p:ajaxStatus onstart="PF('statusDialog').show()"
				onsuccess="PF('statusDialog').hide()" />

			<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
				closable="false" resizable="false" showHeader="false">
				<p:graphicImage value="/images/loadingProgress.gif" />
			</p:dialog>
			<p:panel header="ORDEN DE PRODUCCIÓN" style="text-align:center">

				<div id="div0">
					<h:form id="formOrdenProd" style="width: 100%; margin: 0 auto;">
						<p:growl id="msgs" showDetail="true" />

						<center>
							<h:panelGrid id="ordenProd" columns="4" cellpadding="2">
								<p:outputLabel for="idSol" value="Cliente: " />
								<p:selectOneMenu id="idSol"
									value="#{ordenesProdBean.selectedOp.usuario.userId}"
									required="true" style="width:150px">

									<f:selectItem itemLabel="- Seleccione -" itemValue=""
										noSelectionOption="true" />
									<f:selectItems value="#{ordenesProdBean.selectedUsuario}"></f:selectItems>
								</p:selectOneMenu>

								<p:outputLabel for="idFechaAct" value="Fecha Actual: " />
								<p:outputLabel id="idFechaAct"
									value="#{ordenesProdBean.currentDate}">
									<f:convertDateTime pattern="dd/MM/yyyy" />
								</p:outputLabel>

								<p:outputLabel for="idResp" value="Responsable: " />
								<p:selectOneMenu id="idResp"
									value="#{ordenesProdBean.selectedOp.usuario.userId}"
									required="true" style="width:150px">

									<f:selectItem itemLabel="- Seleccione -" itemValue=""
										noSelectionOption="true" />
									<f:selectItems value="#{ordenesProdBean.selectedUsuario}"></f:selectItems>
								</p:selectOneMenu>

								<!-- <p:outputLabel for="idFechaEntr" value="Fecha de Entrega: " />
						<p:calendar id="idFechaEntr" value="#{ordenesProdBean.fEntrega}"
							pattern="dd-MM-yyyy" mask="true" locale="de" navigator="true"
							showOn="button" size="6" required="true" /> -->
							</h:panelGrid>
						</center>
					</h:form>
				</div>

				<p:separator />

				<h:form id="basicUpload" enctype="multipart/form-data">
					<p:growl showDetail="true" />
					<center>
						<p:outputLabel value="**** En Construcción:  " />
						<p:fileUpload id="fileUp" value="#{uploadFileBean.file}"
							mode="simple" />
						<p:spacer width="10" />
						<p:commandButton value="Importar"
							actionListener="#{uploadFileBean.upload()}"
							process="@form :basicUpload:fileUp" partialSubmit="true"
							ajax="false" />
					</center>
				</h:form>

				<p:separator />
				<div id="div1">
					<h:form id="formDetaProd" style="width: 300px; margin: 0 auto;">
						<p:growl id="messages" showDetail="true" />
						<p:panel id="panel" header="Detalle de producción"
							style="width: 400px;">
							<p:panelGrid columns="2" style="width: 100%; margin: 0 auto;">

								<p:outputLabel value="Modelo: " />
								<p:selectOneMenu value="#{detaOrdenBean.modelo}" required="true"
									style="width:150px">

									<f:selectItem itemLabel="- Seleccione -"
										noSelectionOption="true" itemValue="0" />
									<f:selectItems value="#{detaOrdenBean.selectedItemsModelo}" />
								</p:selectOneMenu>

								<p:outputLabel value="Talla: " />
								<p:selectOneMenu id="idTalla" value="#{detaOrdenBean.talla}"
									required="true" style="width:150px">

									<f:selectItem itemLabel="- Seleccione -" itemValue=""
										noSelectionOption="true" />
									<f:selectItems value="#{detaOrdenBean.selectedItemsTalla}"></f:selectItems>
								</p:selectOneMenu>

								<p:outputLabel value="Cantidad: " />
								<p:inputText value="#{detaOrdenBean.cantidad}" />

								<f:facet name="footer">
									<p:commandButton value="Añadir"
										actionListener="#{detaOrdenBean.addAction()}" ajax="true"
										update="formDetaProd" />
								</f:facet>
							</p:panelGrid>

							<p:spacer height="5px;" />

							<p:dataTable id="tblDO" value="#{detaOrdenBean.orderlist}"
								var="i" style="width: auto;"
								emptyMessage="No se ha agredado nada a la lista">

								<p:column>
									<f:facet name="header">
										<p:outputLabel value="Modelo" />
									</f:facet>
									<p:outputLabel value="#{i.modelo}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<p:outputLabel value="Talla" />
									</f:facet>
									<p:outputLabel value="#{i.talla}" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<p:outputLabel value="Cantidad" />
									</f:facet>
									<p:outputLabel value="#{i.cantidad}" style="width:100%"></p:outputLabel>
								</p:column>

								<p:column headerText="Eliminar?" style="width:50px">
									<p:commandButton
										actionListener="#{detaOrdenBean.deleteAction(i)}" ajax="true"
										update="tblDO, formDetaProd:tblDO, :formDetaProd:messages"
										process="@this" icon="fa fa-close" title="Eliminar" />
								</p:column>

								<p:columnGroup type="footer">
									<p:row>
										<p:column colspan="2" style="text-align:right"
											footerText="Total:" />

										<p:column colspan="2" footerText="#{detaOrdenBean.total}" />

									</p:row>
								</p:columnGroup>
							</p:dataTable>
						</p:panel>
						<p:resizable for="panel" />
					</h:form>
				</div>

			</p:panel>
			<div id="div2" style="width: 300px; margin: 0 auto;">
				<p:commandButton value="PROCESAR ORDEN"
					actionListener="#{detaOrdenBean.displayOrden()}"></p:commandButton>
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>
